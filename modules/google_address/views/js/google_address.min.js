/**
* NOTICE OF LICENSE.
*
* This source file is subject to a commercial license from BSofts.
* Use, copy, modification or distribution of this source file without written
* license agreement from the BSofts is strictly forbidden.
*
*  @author    BSoft Inc
*  @copyright 2020 BSoft Inc.
*  @license   Commerical License
*/

var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};var input=document.querySelector("input[name=phone]"),telInput=null,countryDropdown=document.querySelector("select[name=id_country]"),GoogleAddress={geoCoder:null,googleMap:null,googleMarker:null,infoWindow:null,searchBox:null,inputField:null,inputCity:null,inputPostcode:null,inputAddress2:null,inputCountry:null,inputState:null,mapTypeId:null,bounds:{},lastPosition:{},boundsSet:!1,draggable:!1,mapZoom:GOOGLE_MAP_ZOOM_LEVEL,styles:JSON.parse(GOOGLE_MAP_THEME),isMapEnabled:GOOGLE_ADDRESS_GOOGLE_MAP,longitude:defaultLong,latitude:defaultLat,mapElement:"google-address-map-canvas",init:function(){GoogleAddress.initGoogleAddress(150,50);$(document).on("change","input[name=address1]",GoogleAddress.locateGoogleAddress);$(GoogleAddress.inputField).length&&$(GoogleAddress.inputField).trigger("chage")},initFormFields:function(){GoogleAddress.inputCity=$("input[name=city]").get(0);GoogleAddress.inputPostcode=$("input[name=postcode]").get(0);GoogleAddress.inputAddress1=$("input[name=address1]").get(0);GoogleAddress.inputAddress2=$("input[name=address2]").get(0);GoogleAddress.inputCountry=$("select[name=id_country]").get(0);GoogleAddress.inputState=$("select[name=id_state]").get(0);GoogleAddress.inputField=$("input[name=address1]").get(0);GoogleAddress.isMapEnabled&&$(GoogleAddress.inputField).after($("<div/>",{"class":"form-group row"}).append($("<div/>",{"class":"col-md-3"})).append($("<div/>",{"class":"col-md-12"}).append($("<div/>",{id:"google-address-map-canvas",style:"width:100%; height: 500px; border: 1px solid #000;"}))))},initGoogleAddress:function(a,b){a||(a=50);b||(b=50);GoogleAddress.searchBox=new google.maps.places.Autocomplete(GoogleAddress.inputField);GoogleAddress.searchBox.addListener("place_changed",GoogleAddress.locateGoogleAddress);if(GoogleAddress.isMapEnabled){GoogleAddress.infoWindow=new google.maps.InfoWindow({size:new google.maps.Size(a,b)});GoogleAddress.geoCoder=new google.maps.Geocoder;$.trim($(GoogleAddress.inputField).val())&&GoogleAddress.initGeocodeRequest($.trim($(GoogleAddress.inputField).val()));var c=new google.maps.LatLng(GoogleAddress.latitude,GoogleAddress.longitude),d={zoom:GoogleAddress.mapZoom,center:c,styles:GoogleAddress.styles,mapTypeId:google.maps.MapTypeId.ROADMAP};GoogleAddress.googleMap=new google.maps.Map(document.getElementById(GoogleAddress.mapElement),d);GoogleAddress.bounds=new google.maps.LatLngBounds;GoogleAddress.lastPosition=c;google.maps.event.addListener(GoogleAddress.googleMap,"bounds_changed",function(){GoogleAddress.boundsSet||(GoogleAddress.bounds=GoogleAddress.googleMap.getBounds(),GoogleAddress.boundsSet=!0)});google.maps.event.addListener(GoogleAddress.googleMap,"click",function(){GoogleAddress.infoWindow.close()})}},locateGoogleAddress:function(){var a=GoogleAddress.searchBox.getPlace();"undefined"!==typeof a&&(GoogleAddress.autoFillAddressFields(a),GoogleAddress.isMapEnabled&&GoogleAddress.initGeocodeRequest(a.formatted_address))},initGeocodeRequest:function(a){a&&""!=a&&GoogleAddress.geoCoder.geocode({address:a},function(b,c){c==google.maps.GeocoderStatus.OK?(GoogleAddress.googleMap.setCenter(b[0].geometry.location),GoogleAddress.googleMarker&&(GoogleAddress.googleMarker.setMap(null),GoogleAddress.infoWindow&&GoogleAddress.infoWindow.close()),GoogleAddress.googleMarker=new google.maps.Marker({map:GoogleAddress.googleMap,draggable:GoogleAddress.draggable,position:b[0].geometry.location}),google.maps.event.addListener(GoogleAddress.googleMarker,"dragend",function(){var d=GoogleAddress.googleMarker.getPosition();GoogleAddress.bounds.contains(d)?GoogleAddress.lastPosition=d:GoogleAddress.googleMarker.setPosition(GoogleAddress.lastPosition);GoogleAddress.locateGeocodePosition(GoogleAddress.lastPosition)}),google.maps.event.addListener(GoogleAddress.googleMarker,"click",function(){GoogleAddress.googleMarker.formatted_address?GoogleAddress.infoWindow.setContent(GoogleAddress.googleMarker.formatted_address):GoogleAddress.infoWindow.setContent(a);GoogleAddress.infoWindow.open(GoogleAddress.googleMap,GoogleAddress.googleMarker)}),google.maps.event.trigger(GoogleAddress.googleMarker,"click")):alert("Geocode was not successful for the following reason: "+c)})},locateGeocodePosition:function(a){GoogleAddress.geoCoder.geocode({latLng:a},function(b){GoogleAddress.googleMarker.formatted_address=b&&0<b.length?b[0].formatted_address:undetermined_add_label;GoogleAddress.infoWindow.setContent(GoogleAddress.googleMarker.formatted_address);GoogleAddress.infoWindow.open(GoogleAddress.googleMap,GoogleAddress.googleMarker);GoogleAddress.inputField.value=GoogleAddress.googleMarker.formatted_address});GoogleAddress.updateState(a)},updateState:function(a){GoogleAddress.geoCoder.geocode({location:a},function(b,c){"OK"===c?b[0]?GoogleAddress.autoFillAddressFields(b[0]):window.alert("No results found"):window.alert("Geocoder failed due to: "+c)})},autoFillAddressFields:function(a){var b={street_number:"short_name",route:"long_name",country:"short_name",locality:"long_name",postal_code:"short_name",premise:"short_name",sublocality:"long_name",neighborhood:"long_name",administrative_area_level_1:"short_name",administrative_area_level_2:"short_name"},c=!1,d=!1,f=[];GoogleAddress.resetFormFields();if("undefined"!==typeof a&&"undefined"!==typeof a.address_components){for(var g=0;g<a.address_components.length;g++){var h=a.address_components[g].types[0];if(b[h]){var e=a.address_components[g][b[h]];switch(h){case "street_number":f.push(e+",");break;case "route":f.push(e);break;case "premise":f.push(e+"/");break;case "locality":1==GOOGLE_ADDRESS_AUTOFILL_CITY&&$(GoogleAddress.inputCity).val(e);break;case "postal_code":1==GOOGLE_ADDRESS_AUTOFILL_ZIPCODE&&$(GoogleAddress.inputPostcode).val(e).trigger("keypress").trigger("blur");break;case "country":d=e;break;case "administrative_area_level_1":c=e;break;case "administrative_area_level_2":1==GOOGLE_ADDRESS_AUTOFILL_ADDRESS2&&$(GoogleAddress.inputAddress2).val(e)}}}GoogleAddress.inputAddress1.value=void 0!==a.name?a.name:f.join("")}d&&GoogleAddress.setCountry(d,c)},setCountry:function(a,b){1==GOOGLE_ADDRESS_AUTOFILL_COUNTRY&&$.get(gAddressUrl,{ajax:!0,iso_country:a,action:"getCountry"},"json").done(function(c){"undefined"!==typeof c&&c.success&&c.id_country&&($(GoogleAddress.inputCountry).length&&($(GoogleAddress.inputCountry).val(c.id_country).trigger("change"),b&&setTimeout(function(){GoogleAddress.setState(b,a)},300),1==GOOGLE_ADDRESS_INTL_PHONE&&(window.intlTelInputGlobals.getInstance(input).destroy(),intlNumber(c.id_country))),0==c.hasState?$(GoogleAddress.inputState).closest(".form-group").hide():$(GoogleAddress.inputState).closest(".form-group").show())})},setState:function(a,b){1==GOOGLE_ADDRESS_AUTOFILL_STATE&&$.get(gAddressUrl,{iso_state:a,iso_country:b,action:"getState"},"json").done(function(c){"undefined"!==typeof c&&c.success&&c.id_state&&$(GoogleAddress.inputState).length&&($(GoogleAddress.inputState).each(function(d){$(this).removeAttr("selected")}),$(GoogleAddress.inputState).val(c.id_state).trigger("change"))})},resetFormFields:function(){GoogleAddress.inputCity.value="";GoogleAddress.inputPostcode.value="";GoogleAddress.inputAddress1.value="";GoogleAddress.inputAddress2.value=""}};addScript("https://maps.googleapis.com/maps/api/js?libraries=places&key="+GOOGLE_API_KEY+"&language="+ISO_LANG);$(document).ready(function(){JSON.parse(gAcountries);input=document.querySelector("input[name=phone]");GoogleAddress.initFormFields();$(GoogleAddress.inputField).length&&GoogleAddress.init();$(input).length&&1==GOOGLE_ADDRESS_INTL_PHONE&&(initErrors(input),intlNumber($("select[name=id_country] option:selected").val()));if(isOneSeven&&front_controller)prestashop.on("updatedAddressForm",function(a){$(GoogleAddress.inputField).length&&(GoogleAddress.initFormFields(),GoogleAddress.init());input=document.querySelector("input[name=phone]");$(input).length&&1==GOOGLE_ADDRESS_INTL_PHONE&&(initErrors(input),a=$("select[name=id_country] option:selected").val(),telInput=window.intlTelInput(input,getIntlOptions(a)),setListners())})});function addScript(a){document.write('<script src="'+a+'">\x3c/script>')}function intlNumber(a){"undefined"!==typeof a&&a&&""!=a||(a=$("select[name=id_country] option:selected").val()||defaultCountry);telInput=intlTelInput(input,getIntlOptions(a));setListners()}function getIntlOptions(a){var b=JSON.parse(gAcountries);return{utilsScript:utils,preferredCountries:[],initialCountry:b[a],onlyCountries:"bo"==type?[]:[b[a]]}}function setListners(){input&&(input.addEventListener("blur",validateIntel),input.addEventListener("change",validateIntel),input.addEventListener("keyup",validateIntel),input.addEventListener("keydown",validateIntel))}function validateIntel(){var a=telInput.getNumber();resetTelInput();$.trim(a)&&(telInput.isValidNumber()?$("#valid-msg").removeClass("hide"):($(input).addClass("error"),a=telInput.getValidationError(),$("#error-msg").html(intl_errors[a]),$("#error-msg").removeClass("hide")))}function resetTelInput(){input.classList.remove("error");$("#error-msg").addClass("hide");$("#valid-msg").addClass("hide")}function initErrors(a){$(a).attr("maxlength",16).after('<span id="valid-msg" class="hide">\u2713 '+msg_labels.success+'</span><span id="error-msg" class="hide">\u2717 '+msg_labels.error+"</span>")}(function(a){a.fn.inputFilter=function(b){return this.on("input keydown keyup mousedown mouseup select contextmenu drop",function(){b(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""})}})(jQuery);$("input[name=phone]").inputFilter(function(a){return/^-?\d*$/.test(a)});